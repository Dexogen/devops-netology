## 03-sysadmin-06-net
1. Работа c HTTP через телнет.
- Подключитесь утилитой телнет к сайту stackoverflow.com
`telnet stackoverflow.com 80`
- отправьте HTTP запрос
```bash
GET /questions HTTP/1.0
HOST: stackoverflow.com
[press enter]
[press enter]
```
- В ответе укажите полученный HTTP код, что он означает?
```bash
❯ telnet stackoverflow.com 80
Trying 151.101.193.69...
Connected to stackoverflow.com.
Escape character is '^]'.
GET /questions HTTP/1.0
HOST: stackoverflow.com

HTTP/1.1 301 Moved Permanently
Connection: close
Content-Length: 0
Server: Varnish
Retry-After: 0
Location: https://stackoverflow.com/questions
Accept-Ranges: bytes
Date: Mon, 17 Oct 2022 13:41:58 GMT
Via: 1.1 varnish
X-Served-By: cache-fra19151-FRA
X-Cache: HIT
X-Cache-Hits: 0
X-Timer: S1666014118.274850,VS0,VE0
Strict-Transport-Security: max-age=300
X-DNS-Prefetch-Control: off

Connection closed by foreign host.
# 301 - это перманентный редирект, сервер хочет отправить нас на https. В дополнение к механизму HSTS, который не даст нам работать по http.
```
2. Повторите задание 1 в браузере, используя консоль разработчика F12.
- откройте вкладку `Network`
- отправьте запрос http://stackoverflow.com
- найдите первый ответ HTTP сервера, откройте вкладку `Headers`
- укажите в ответе полученный HTTP код.
- проверьте время загрузки страницы, какой запрос обрабатывался дольше всего?
- приложите скриншот консоли браузера в ответ.
```bash
# В браузере поведение отличается и мы видим 307 редирект, который уже является признаком работы HSTS.
```
3. Какой IP адрес у вас в интернете?
```bash
❯ dig +short txt ch whoami.cloudflare @1.0.0.1
"46.188.69.9"
```
4. Какому провайдеру принадлежит ваш IP адрес? Какой автономной системе AS? Воспользуйтесь утилитой `whois`
```bash
❯ whois -h whois.ripe.net 46.188.69.9
...
descr:          2COM Co ltd.
origin:         AS8334
...
```
5. Через какие сети проходит пакет, отправленный с вашего компьютера на адрес 8.8.8.8? Через какие AS? Воспользуйтесь утилитой `traceroute`
```bash
❯ traceroute -IAn 8.8.8.8
traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 60 byte packets
 1  192.168.50.1 [*]  0.721 ms  0.706 ms  0.703 ms
 2  46.188.69.1 [AS8334]  1.696 ms  1.694 ms  1.692 ms
 3  80.253.16.197 [AS39153]  1.702 ms  1.708 ms  1.757 ms
 4  80.253.16.81 [AS39153]  2.549 ms  2.547 ms  2.544 ms
 5  72.14.232.15 [AS15169]  2.389 ms  2.433 ms  2.433 ms
 6  108.170.250.113 [AS15169]  2.549 ms  1.782 ms  2.217 ms
 7  72.14.234.20 [AS15169]  14.625 ms  21.246 ms  21.238 ms
 8  72.14.232.190 [AS15169]  14.041 ms  14.039 ms  14.036 ms
 9  142.250.236.77 [AS15169]  16.123 ms  16.120 ms  16.117 ms
...
19  8.8.8.8 [AS15169]  16.338 ms  16.336 ms  16.333 ms
```
6. Повторите задание 5 в утилите `mtr`. На каком участке наибольшая задержка - delay?
```bash
❯ mtr -zn 8.8.8.8
 Host                           Loss%   Snt   Last   Avg  Best  Wrst StDev
 1. AS???    192.168.50.1        0.0%    67    0.7   0.7   0.3   0.9   0.1
 2. AS8334   46.188.69.1         0.0%    67    1.6   1.7   1.1   2.3   0.2
 3. AS39153  80.253.16.197       0.0%    67    1.7   2.6   1.1  19.6   3.2
 4. AS39153  80.253.16.81        0.0%    67    2.2   2.9   1.9  11.6   2.1
 5. AS15169  72.14.232.15        0.0%    67    1.9   1.9   1.4   2.7   0.2
 6. AS15169  108.170.250.113     0.0%    67   14.1   3.7   1.7  30.7   4.6
 7. AS15169  72.14.234.20        0.0%    67   14.7  14.8  14.5  16.5   0.3
 8. AS15169  72.14.232.190       0.0%    67   14.4  14.7  14.0  17.6   0.6
 9. AS15169  142.250.236.77      0.0%    67   15.9  16.7  15.5  60.9   5.5
...
19. AS15169  8.8.8.8             0.0%    66   16.2  16.2  15.9  16.5   0.1
### Больше всего задержка на 9 хопе. Именно из-за задержки я предпочитаю клаудфлеровский DNS, который за вдвое меньшее кол-во хопов выдает значительно более низкую задержку.
```
7. Какие DNS сервера отвечают за доменное имя dns.google? Какие A записи? воспользуйтесь утилитой `dig`
```bash
❯ dig dns.google
...
dns.google.             857     IN      A       8.8.4.4
dns.google.             857     IN      A       8.8.8.8
...
```
8. Проверьте PTR записи для IP адресов из задания 7. Какое доменное имя привязано к IP? воспользуйтесь утилитой `dig`
```bash
❯ dig -x 8.8.8.8
...
8.8.8.8.in-addr.arpa.   33320   IN      PTR     dns.google.
...
❯ dig -x 8.8.4.4
...
4.4.8.8.in-addr.arpa.   19862   IN      PTR     dns.google.
...
```
В качестве ответов на вопросы можно приложите лог выполнения команд в консоли или скриншот полученных результатов.
---