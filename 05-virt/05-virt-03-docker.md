# 05-virt-03-docker

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

[![Docker repo](https://img.shields.io/badge/dexogen-nginx%3Alatest-green)
![Docker Image Size (tag)](https://img.shields.io/docker/image-size/dexogen/nginx/latest)](https://hub.docker.com/r/dexogen/nginx)

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

Сценарий:

- Высоконагруженное монолитное java веб-приложение;
    > 
- Nodejs веб-приложение;
    > Отлично собирается и упаковывается в контейнер. Докер и K8s уже ждут образ.
- Мобильное приложение c версиями для Android и iOS;
    > Если PWA, то вполне можно обойтись и контейнером для тестирования неспецифического для конечного устройства функционала. Для всего остального потребуется виртуализация.
- Шина данных на базе Apache Kafka;
    > Кафка с зукипером вполне неплохо себя чувствуют в контейнере и без. Нет каких-то явных проблем для их использования в любой среде.
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
    > Для боевой среды с высокой нагрузкой я предпочел бы виртуальные машины. Для тестовой вполне подойдут контейнеры.
- Мониторинг-стек на базе Prometheus и Grafana;
    > Контейнеры. Прекрасно себя чувствует в docker и K8s. 
- MongoDB, как основное хранилище данных для java-приложения;
    > Для боевых баз данных я предпочитаю использовать физику. Чем меньше переменных в инсталляции, тем проще ее поддерживать и дебажить.
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.
    > Контейнеры. По опыту GitLab в контейнере + Elasticsearch + Registry прекрасно себя чувствуют в нагруженной среде и 30 разработчиках.

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

```bash
❯ docker run -it -d -v ~/data/:/data --name centos centos
❯ docker run -it -d -v ~/data/:/data --name debian debian
❯ docker exec -it centos bash
[root@a937ae53790a /]# echo "It Is Wednesday" > /data/my.dudes
❯ echo "Feels good man" > data/sad.pepe
❯ docker exec -it debian bash
root@25716be3ff0d:/# ls /data/
my.dudes  sad.pepe
```

## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

> Решил собрать всё-таки версию более свежую 6.6.0 на alpine 3.16.2.
>[![Docker repo](https://img.shields.io/badge/dexogen-ansible%3A6.6.0-green)
![Docker Image Size (tag)](https://img.shields.io/docker/image-size/dexogen/ansible/6.6.0)](https://hub.docker.com/r/dexogen/ansible)